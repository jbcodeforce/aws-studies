<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.1"><title>S3-Storage - AWS Studies</title><link rel=stylesheet href=../../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#storage class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="AWS Studies" class="md-header__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AWS Studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> S3-Storage </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/aws-studies.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="AWS Studies" class="md-nav__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> AWS Studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/aws-studies.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> EC2-others </a> </li> <li class=md-nav__item> <a href=../networking/ class=md-nav__link> Network </a> </li> <li class=md-nav__item> <a href=../security/ class=md-nav__link> Security </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> S3-Storage <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> S3-Storage </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#file-storage class=md-nav__link> File Storage </a> </li> <li class=md-nav__item> <a href=#block-storage class=md-nav__link> Block Storage </a> </li> <li class=md-nav__item> <a href=#object-storage class=md-nav__link> Object Storage </a> </li> <li class=md-nav__item> <a href=#amazon-elastic-block-storage-ebs class=md-nav__link> Amazon Elastic Block Storage EBS </a> <nav class=md-nav aria-label="Amazon Elastic Block Storage EBS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#volume-types class=md-nav__link> Volume types </a> </li> <li class=md-nav__item> <a href=#snapshots class=md-nav__link> Snapshots </a> </li> <li class=md-nav__item> <a href=#ebs-multi-attach class=md-nav__link> EBS Multi-attach </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#s3-simple-storage-service class=md-nav__link> S3 - Simple Storage Service </a> <nav class=md-nav aria-label="S3 - Simple Storage Service"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> Use cases </a> </li> <li class=md-nav__item> <a href=#security-control class=md-nav__link> Security control </a> </li> <li class=md-nav__item> <a href=#s3-website-hosting class=md-nav__link> S3 Website hosting </a> </li> <li class=md-nav__item> <a href=#s3-replication class=md-nav__link> S3 replication </a> </li> <li class=md-nav__item> <a href=#s3-storage-classes class=md-nav__link> S3 Storage classes </a> </li> <li class=md-nav__item> <a href=#other-features class=md-nav__link> Other features </a> </li> <li class=md-nav__item> <a href=#faq class=md-nav__link> FAQ </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#amazon-appflow class=md-nav__link> Amazon AppFlow </a> </li> <li class=md-nav__item> <a href=#elastic-file-system-efs class=md-nav__link> Elastic File System (EFS) </a> </li> <li class=md-nav__item> <a href=#snowball class=md-nav__link> Snowball </a> </li> <li class=md-nav__item> <a href=#fsx class=md-nav__link> FSx </a> </li> <li class=md-nav__item> <a href=#hybrid-cloud-storage class=md-nav__link> Hybrid cloud storage </a> </li> <li class=md-nav__item> <a href=#transfer-family class=md-nav__link> Transfer Family </a> </li> <li class=md-nav__item> <a href=#datasync class=md-nav__link> DataSync </a> </li> <li class=md-nav__item> <a href=#storage-comparison class=md-nav__link> Storage comparison </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../route53/ class=md-nav__link> Route 53 </a> </li> <li class=md-nav__item> <a href=../../monitoring/monitoring/ class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=../messaging/ class=md-nav__link> Messaging </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> Kinesis* </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sa/well-architectured/ class=md-nav__link> Well Architectured </a> </li> <li class=md-nav__item> <a href=../../sa/sol-design/ class=md-nav__link> Solution design </a> </li> <li class=md-nav__item> <a href=../../sa/psa-role/ class=md-nav__link> SA </a> </li> <li class=md-nav__item> <a href=../../sa/saas/ class=md-nav__link> SaaS </a> </li> <li class=md-nav__item> <a href=../../sa/resilience/ class=md-nav__link> Resilience </a> </li> <li class=md-nav__item> <a href=../../templ/ class=md-nav__link> Conduct Design session </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../analytics/ class=md-nav__link> Analytics </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Data data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/ class=md-nav__link> RDS-Aurora-ES </a> </li> <li class=md-nav__item> <a href=../../data/dynamodb/ class=md-nav__link> DynamoDB </a> </li> <li class=md-nav__item> <a href=../../data/data-lake/ class=md-nav__link> Data Lake </a> </li> <li class=md-nav__item> <a href=../../data/redshift/ class=md-nav__link> RedShift </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ai-ml/ class=md-nav__link> AI-ML </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Serverless <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Serverless data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../serverless/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../serverless/lambda/ class=md-nav__link> Lambda </a> </li> <li class=md-nav__item> <a href=../../serverless/apigtw/ class=md-nav__link> API Gateway </a> </li> <li class=md-nav__item> <a href=../../serverless/eks/ class=md-nav__link> EKS </a> </li> <li class=md-nav__item> <a href=../../serverless/eventbridge/ class=md-nav__link> EventBridge </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Playground <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Playground data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Playground </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../playground/gettingstarted/ class=md-nav__link> Getting Started IAM-EC2 </a> </li> <li class=md-nav__item> <a href=../../playground/rds/ class=md-nav__link> RDS </a> </li> <li class=md-nav__item> <a href=../../playground/rt-data-processing/ class=md-nav__link> Data processing </a> </li> <li class=md-nav__item> <a href=../../playground/spark-emr/ class=md-nav__link> Analytics on EMR </a> </li> <li class=md-nav__item> <a href=../../playground/ecs/ class=md-nav__link> ECS </a> </li> <li class=md-nav__item> <a href=../../playground/s3-org-billing/ class=md-nav__link> S3 storage lens </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/big-data-tenant-analytics/ class=md-nav__link> SaaS demo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9> Coding <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Coding data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/ class=md-nav__link> Practices </a> </li> <li class=md-nav__item> <a href=../../coding/cloudFormation/ class=md-nav__link> CloudFormation </a> </li> <li class=md-nav__item> <a href=../../coding/cdk/ class=md-nav__link> CDK </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io class=md-nav__link> Return to main </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#file-storage class=md-nav__link> File Storage </a> </li> <li class=md-nav__item> <a href=#block-storage class=md-nav__link> Block Storage </a> </li> <li class=md-nav__item> <a href=#object-storage class=md-nav__link> Object Storage </a> </li> <li class=md-nav__item> <a href=#amazon-elastic-block-storage-ebs class=md-nav__link> Amazon Elastic Block Storage EBS </a> <nav class=md-nav aria-label="Amazon Elastic Block Storage EBS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#volume-types class=md-nav__link> Volume types </a> </li> <li class=md-nav__item> <a href=#snapshots class=md-nav__link> Snapshots </a> </li> <li class=md-nav__item> <a href=#ebs-multi-attach class=md-nav__link> EBS Multi-attach </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#s3-simple-storage-service class=md-nav__link> S3 - Simple Storage Service </a> <nav class=md-nav aria-label="S3 - Simple Storage Service"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> Use cases </a> </li> <li class=md-nav__item> <a href=#security-control class=md-nav__link> Security control </a> </li> <li class=md-nav__item> <a href=#s3-website-hosting class=md-nav__link> S3 Website hosting </a> </li> <li class=md-nav__item> <a href=#s3-replication class=md-nav__link> S3 replication </a> </li> <li class=md-nav__item> <a href=#s3-storage-classes class=md-nav__link> S3 Storage classes </a> </li> <li class=md-nav__item> <a href=#other-features class=md-nav__link> Other features </a> </li> <li class=md-nav__item> <a href=#faq class=md-nav__link> FAQ </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#amazon-appflow class=md-nav__link> Amazon AppFlow </a> </li> <li class=md-nav__item> <a href=#elastic-file-system-efs class=md-nav__link> Elastic File System (EFS) </a> </li> <li class=md-nav__item> <a href=#snowball class=md-nav__link> Snowball </a> </li> <li class=md-nav__item> <a href=#fsx class=md-nav__link> FSx </a> </li> <li class=md-nav__item> <a href=#hybrid-cloud-storage class=md-nav__link> Hybrid cloud storage </a> </li> <li class=md-nav__item> <a href=#transfer-family class=md-nav__link> Transfer Family </a> </li> <li class=md-nav__item> <a href=#datasync class=md-nav__link> DataSync </a> </li> <li class=md-nav__item> <a href=#storage-comparison class=md-nav__link> Storage comparison </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/jbcodeforce/aws-studies.git/edit/master/docs/infra/storage.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=storage>Storage<a class=headerlink href=#storage title="Permanent link">&para;</a></h1> <p>AWS storage services are grouped into three categories – block storage, file storage, and object storage.</p> <h2 id=file-storage>File Storage<a class=headerlink href=#file-storage title="Permanent link">&para;</a></h2> <p>File storage is ideal when you require centralized access to files that need to be easily shared and managed by multiple host computers. Typically, this storage is mounted onto multiple hosts, and requires file locking and integration with existing file system communication protocols.</p> <p>File storage systems are often supported with a network attached storage (NAS) servers.</p> <h2 id=block-storage>Block Storage<a class=headerlink href=#block-storage title="Permanent link">&para;</a></h2> <p>Block storage splits files into fixed-size chunks of data called blocks that have their own addresses, which improve read access.</p> <p>Outside of the address, no additional metadata is associated with each block.</p> <p>Block storage in the cloud is analogous to direct-attached storage (DAS) or a storage area network (SAN).</p> <p>Amazon EC2 <code>instance store</code> provides temporary block-level storage for an instance. The storage is located on disks that are physically attached to the host computer. It is deleted when the EC2 instance is deleted. It has a high throughput and low latency I/O.</p> <p>Instance store is ideal if you host applications that replicate data to other EC2 instances such as Kafka or Hadoop.</p> <h2 id=object-storage>Object Storage<a class=headerlink href=#object-storage title="Permanent link">&para;</a></h2> <p>Objects are stored in a flat structure instead of a hierarchy. We can store almost any type of data, and there is no limit to the number of objects stored, which makes it readily scalable.</p> <h2 id=amazon-elastic-block-storage-ebs>Amazon Elastic Block Storage EBS<a class=headerlink href=#amazon-elastic-block-storage-ebs title="Permanent link">&para;</a></h2> <p>Elastic Block Store Volume is a network drive attached to the EC2 instance. It is locked to an AZ, and uses provisioned capacity in GBs and IOPS. It is HA, and can be backed up.</p> <p><img alt src=../images/ebs-volume.png></p> <ul> <li>Create a EBS while creating the EC2 instance and keep it. It is not deleted on EC2 shutdown.</li> <li>EBS volume can be attached to a new EC2 instance, normally there is a 1 to 1 relation between volume and EC2 instance. Except for multi-attach EBS.</li> <li>The maximum amount of storage you can have is 16 TB.</li> <li>Once logged, add a filesystem, mount to a folder and modify boot so the volume is mounted at start time. Which looks like:</li> </ul> <div class=highlight><pre><span></span><code><span class=c1># List existing block storage, verify our created storage is present</span>
lsblk
<span class=c1># Verify file system type</span>
sudo file -s /dev/xdvf
<span class=c1># Create a ext4 file system on the device </span>
sudo mkfs -t ext4 /dev/xvdb
<span class=c1># make a mount point</span>
sudo mkdir /data
sudo mount  /dev/xvdb /data
<span class=c1># Add entry in /etc/fstab with line like:</span>
/dev/xvdb /data ext4 default,nofail <span class=m>0</span> <span class=m>2</span>
</code></pre></div> <ul> <li>EBS is already a redundant storage, replicated within an AZ.</li> <li>EC2 instance has a logical volume that can be attached to two or more EBS RAID 0 volumes, where write operations are distributed among them. It is used to increate IOPS without any fault tolerance. If one fails, we lost data. It could be used for database with built-in replication mechanism or Kafka node.</li> <li>RAID 1 is for better fault tolerance: a write operation is going to all attached volumes.</li> </ul> <h3 id=volume-types>Volume types<a class=headerlink href=#volume-types title="Permanent link">&para;</a></h3> <p>When creating EC2 instances, you can only use the following EBS volume types as boot volumes: gp2, gp3, io1, io2, and Magnetic (Standard)</p> <ul> <li><strong>gp2 or gp3</strong>: SSD, used for most workload up to 16 TB at 16000 IOPS max (3 IOPS per GB brustable to 3000).</li> <li><strong>io 1</strong> or <strong>io 2</strong>: critical app with large database workloads. max ratio 50:1 IOPS/GB. Min 100 iops and 4G to 16T. 99.9% durability and even 99.999% for io2. EBS Provisioned IOPS SSD (io2 Block Express) is the highest-performance SSD volume designed for business-critical latency-sensitive transactional workloads. </li> <li><strong>st 1</strong>: HDD. Streaming workloads requiring consistent, fast throughput at a low price. For Big data, Data warehouses, Log processing. Up to 16 TiB. 99.9% durability.</li> <li><strong>sc 1</strong>: throughput oriented storage. 500G- 16T, 500MiB/s. Max IOPs at 250. Used for cold HDD, and infrequently accessed data. 99.9% durability.</li> </ul> <p>Encryption has a minimum impact on latency. It encrypts data at rest and during snapshots. * Provisioned IOPS (PIOPS) SSD: used for critical apps with sustained IOPS performance, even more than 16k IOPS. </p> <p>Instance store is a volume attached to the instance, used for root folder. It is a ephemeral storage but has millions read per s and 700k write IOPS. It provides the best disk performance and can be used to have high performance cache for our applications.</p> <p><img alt=5 src=../images/ephemeral.png></p> <p>If we need to run a high-performance database that requires an IOPS of 210,000 for its underlying filesystem, we need <code>instance store</code> and DB replication in place.</p> <details class=-> <summary>Example of use cases</summary> <ul> <li>App requires up to 400 GB of storage for temporary data that is discarded after usage. The application requires approximately 40,000 random IOPS to perform the work on file. =&gt; Prefer a SSD-Backed Storage Optimized (i2) EC2 instances to get more than 365,000 random IOPS. The instance store has no additional cost, compared with the regular hourly cost of the instance. Provisioned IOPS SSD (io1 or io2) EBS volumes can deliver more than the 40,000 IOPS that are required in the scenario. However, this solution is not as cost-effective as an instance store because Amazon EBS adds cost to the hourly instance rate. This solution provides persistence of data beyond the lifecycle of the instance, but persistence is not required in this use case.</li> <li>A database must provide at least 40 GiB of storage capacity and 1,000 IOPS. The most effective storage is gp2 with 334 GB storage: Baseline I/O performance for General Purpose SSD storage is 3 IOPS for each GiB. For 334 GiB of storage, the baseline performance would be 1,002 IOPS. Additionally, General Purpose SSD storage is more cost-effective than Provisioned IOPS storage.</li> </ul> </details> <h3 id=snapshots>Snapshots<a class=headerlink href=#snapshots title="Permanent link">&para;</a></h3> <p>EBS snapshots are incremental backups that only save the blocks on the volume that have changed after your most recent snapshot. Used to backup disk at any point of time of a volume and stores it on S3. <strong>Snapshot Lifecycle policy</strong> helps to create snapshot with scheduling it by defining policies. To move a volume to another AZ or data center we can create a volume from a snapshot.</p> <p>EBS snapshots can be used to create multiple new volumes, whether they’re in the same Availability Zone or a different one</p> <p>For a consistent snapshot of an EBS Volume, you need to ensure the application flushes any cached data to disk and no other write I/O is performed by the file system on that volume. Once that is taken care of, you can issue a snapshot command. The snapshot command needs only a couple of seconds to capture a point-in-time. You can start using the volume after this. The actual data backup happens in the background, and you don’t have to wait for the data copy to complete. </p> <h3 id=ebs-multi-attach>EBS Multi-attach<a class=headerlink href=#ebs-multi-attach title="Permanent link">&para;</a></h3> <p>Only for io1 or io2 EBS type, a volume can be attached to multiple EC2 instances (up to 16) running in the same AZ. Each instance has full R/W permission. The file system must be cluster aware.</p> <h2 id=s3-simple-storage-service>S3 - Simple Storage Service<a class=headerlink href=#s3-simple-storage-service title="Permanent link">&para;</a></h2> <p><a href="https://s3.console.aws.amazon.com/s3/get-started?region=us-west-1">Amazon S3</a> allows people to store objects (files) in <strong>buckets</strong> (directories), which must have a globally unique name (cross users!). They are defined at the region level. <strong>Object</strong> in a bucket, is referenced as a <strong>key</strong> which can be seen as a file path in a file system. The max size for an object is 5 TB but big file needs to be uploaded in multi-part using 5GB max size.</p> <p>S3 has 11 9's high durability of objects across <strong>multiple AZ</strong> (At least 3). Availability varies with storage class, S3 standard is 99.99%. </p> <p>S3 supports <strong>strong consistency</strong> for all operations with a read-after-write consistency.</p> <p>S3 supports versioning at the bucket level. So file can be restored from previous version, and even deleted file can be retrieved from a previous version.</p> <p>Within the S3 console we will see all buckets in one view (its is a global service). But the buckets are created within a region and are local to the region. </p> <h3 id=use-cases>Use cases<a class=headerlink href=#use-cases title="Permanent link">&para;</a></h3> <ul> <li>Backup and restore</li> <li>Disaster Recovery</li> <li>Archive</li> <li><a href=https://aws.amazon.com/big-data/datalakes-and-analytics/ >Data lakes</a> and big data analytics</li> <li>Hybrid cloud storage: seamless connection between on-premises applications and S3 with AWS Storage Gateway.</li> <li>Cloud-native application data</li> <li>Media hosting</li> <li>Software delivery</li> <li>Static website</li> </ul> <p><a href=https://docs.aws.amazon.com/AmazonS3/latest/userguide/GetStartedWithS3.html>GETTING started</a></p> <h3 id=security-control>Security control<a class=headerlink href=#security-control title="Permanent link">&para;</a></h3> <ul> <li> <p>By default a bucket access is not public, see the <code>Block Public Access</code> setting. Can be enforced at the account level and need to be disable at the account level, before doing it at the bucket level (amazon S3 &gt; block public access settings for this account &gt; edit block public access settings for this account).</p> <p><img alt src=../images/s3-block-access.png></p> </li> <li> <p>To control access with policies we need to disable this, and then define Bucket policy.</p> </li> <li><strong>S3 Bucket Policy</strong>: is security policy defined in S3 console, and also allows cross-account access control. Can be set at the bucket or object level. Policies can be attached to users, groups, or Amazon S3 buckets, enabling centralized management of permissions. With bucket policies, you can grant users within your AWS Account or other AWS Accounts access to your Amazon S3 resources.</li> <li>Explicit DENY in an IAM policy will take precedence over a <a href=https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html>bucket policy permission</a>.</li> <li> <p>Define policies from <a href=https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html>examples</a> or using <a href=https://awspolicygen.s3.amazonaws.com/policygen.html>policy generator tool</a>.</p> <p><img alt src=../images/policygen.png></p> <p>And copy paste the generated policy</p> <p><img alt src=../images/s3-bucket-policy.png></p> </li> <li> <p>By default, when another AWS account uploads an object to your S3 bucket, that account (the object writer) owns the object, has access to it, and can grant other users access to it through ACLs. Bucket owner can take ownership of all objects. It is recommended to disable ACL and use identity and bucket policies. </p> </li> <li> <p>Objects can also be encrypted, and different mechanisms are available:</p> <ul> <li><strong>SSE-S3</strong>: server-side encrypted S3 objects using keys handled &amp; managed and own by AWS using AES-256 protocol must set <code>x-amz-server-side-encryption: "AES256"</code> header in the POST request to upload the file.</li> </ul> <p><img alt src=../diagrams/sse-s3.drawio.png></p> <ul> <li><strong>SSE-KMS</strong>: leverage <a href=https://us-west-2.console.aws.amazon.com/kms/home>AWS Key Management Service</a> to manage encryption keys. Use <code>x-amz-server-side-encryption: "aws:kms"</code> header in POST request. Server side encrypted. It gives user control of the key rotation policy and audit trail with <a href=https://us-west-2.console.aws.amazon.com/cloudtrail/home>CloudTrail</a>.</li> <li><strong>SSE-C</strong>: when we want to manage our own encryption keys. Server-side encrypted. Encryption key must be provided in HTTPS headers, for every HTTPS request made. HTTPS is mandatory.</li> </ul> <p><img alt src=../diagrams/sse-c.drawio.png></p> <ul> <li><strong>Client Side Encryption</strong>: encrypt before sending objects to S3.</li> </ul> </li> <li> <p>Encryption can be done at the bucket level, or using bucker policies to refuse any PUT calls on S3 object without encryption header. </p> </li> <li> <p>An IAM principal can access an S3 object if the user IAM permissions allow it or the resource policy allows it and there is no explicit deny.</p> </li> </ul> <h3 id=s3-website-hosting>S3 Website hosting<a class=headerlink href=#s3-website-hosting title="Permanent link">&para;</a></h3> <p>We can have static website on S3. Once html pages are uploaded, setting the properties as static web site from the bucket. The bucket needs to be public, and have a security policy to allow any user to <code>GetObject</code> action. The URL may look like: <code>&lt;bucket-name&gt;.s3-website.&lt;AWS-region&gt;.amazonaws.com</code></p> <p><img alt src=../images/s3-static-website.png></p> <ul> <li>Example of pushing a mkdocs site to s3 after enabling public access</li> </ul> <div class=highlight><pre><span></span><code>mkdocs build
aws s3 sync ./site s3://jbcodeforce-aws-studies 
<span class=c1># The url is at the bottom of the bucket in the website under the Bucket website endpoint for example:</span>
http://jbcodeforce-aws-studies.s3-website-us-west-2.amazonaws.com
</code></pre></div> <ul> <li><strong>Cross Origin Resource Sharing CORS</strong>: The web browser requests won’t be fulfilled unless the other origin allows for the requests, using CORS Headers <code>Access-Control-Allow-Origin</code>. If a client does a cross-origin request on our S3 bucket, we need to enable the correct CORS headers: this is done by adding a security policy with CORS configuration like:</li> </ul> <div class=highlight><pre><span></span><code><span class=nt>&lt;CORSConfiguration&gt;</span>
    <span class=nt>&lt;CORSRule&gt;</span>
        <span class=nt>&lt;AllowedOrigin&gt;</span>enter-bucket-url-here<span class=nt>&lt;/AllowedOrigin&gt;</span>
        <span class=nt>&lt;AllowedMethod&gt;</span>GET<span class=nt>&lt;/AllowedMethod&gt;</span>
        <span class=nt>&lt;MaxAgeSeconds&gt;</span>3000<span class=nt>&lt;/MaxAgeSeconds&gt;</span>
        <span class=nt>&lt;AllowedHeader&gt;</span>Authorization<span class=nt>&lt;/AllowedHeader&gt;</span>
    <span class=nt>&lt;/CORSRule&gt;</span>
<span class=nt>&lt;/CORSConfiguration&gt;</span>
</code></pre></div> <h3 id=s3-replication>S3 replication<a class=headerlink href=#s3-replication title="Permanent link">&para;</a></h3> <p>Once versioning enabled on source and target, a bucket can be replicated in the same region (SRR) or cross regions (CRR). S3 replication is done on at least 3 AZs. One DC down does not impact S3 availability. The replication is done asynchronously. SRR is for log aggregation for example or live replication between production and test, while CRR is used for compliance and DR or replication across AWS accounts. Delete operations are not replicated.</p> <p>Must give proper IAM permissions to S3. When replication is set, only new objects are replicated. To replicate exiting objects use S3 Batch Replication. <strong>S3 Batch Replication</strong> provides you a way to replicate objects that existed before a replication configuration was in place, objects that have previously been replicated, and objects that have failed replication</p> <p>By default delete markers are not replicated by with the advanced options we can enable it.</p> <p>The <strong>AWS S3 sync</strong> command uses the CopyObject APIs to copy objects between S3 buckets in same region. The sync command lists the source and target buckets to identify objects that are in the source bucket but that aren't in the target bucket. The command also identifies objects in the source bucket that have different LastModified dates than the objects that are in the target bucket. The sync command on a versioned bucket copies only the current version of the object—previous versions aren't copied</p> <h3 id=s3-storage-classes>S3 Storage classes<a class=headerlink href=#s3-storage-classes title="Permanent link">&para;</a></h3> <p>When uploading a document into an existing bucket, we can specify the storage class to keep data over time. Different levels are offered with different cost and SLA.</p> <p><img alt=A src=../images/storage-class.png></p> <p>With <strong>Intelligent Tiering</strong>, S3 automates the process of moving objects to the most cost-effective access tier based on access frequency. With <strong>One Zone IA</strong>, there is a risk of data loss in the event of availability zone destruction, and some objects may be unavailable when an AZ goes down. <strong>Standard</strong> is the most expensive storage option. <strong>Standard IA</strong> has a separate retrieval fee.</p> <p>Amazon <strong>Glacier</strong> is for archiving, like writing to tapes. The pricing includes storage and object retrieval cost. <strong>Glacier Deep Archive</strong> (also named Bulk) is the lowest cost storage option for long-term archival and digital preservation. Deep Archive can take several hours (from 12 to 48 hours) depending on the retrieval tier.</p> <p>We can transition objects between storage classes. For infrequently accessed object, move them to STANDARD_IA. For archive objects, that we don’t need in real-time, use GLACIER or DEEP_ARCHIVE. Moving objects can be automated using a lifecycle configuration.</p> <p>At the bucket level, a user can define lifecycle rules for when to transition an object to another storage class.</p> <p><img alt=B src=../images/s3-lifecycle-rule-1.png></p> <p>and</p> <p><img alt=B src=../images/s3-lifecycle-rule-2.png></p> <p>To prevent accidental file deletions, we can setup MFA Delete to use MFA tokens before deleting objects.</p> <p>To improve performance, a big file can be split and then uploaded with local connection to the closed edge access and then use AWS private network to copy between buckets in different region. In case of infinished parts use S3 Lifecycle policy to automate old/unfinished parts deletion.</p> <p><a href=https://jbcodeforce.github.io/refarch-eda/use-cases/connect-s3/ >S3 to Kafka lab</a></p> <p><strong>Storage Class Analysis</strong> can continuously monitor your bucket and track how your objects are accessed over time. This tool generates detailed reports on the percentage of data retrieved and by age groups. You can use this report to manage lifecycle policies. </p> <p><strong>Storage Lens</strong> provides a dashboard on all S3 activities and is automatically enabled.</p> <h3 id=other-features>Other features<a class=headerlink href=#other-features title="Permanent link">&para;</a></h3> <ul> <li><strong>Secure FTP</strong>: server to let you send file via SFTP.</li> <li><strong>Requester Pay</strong>: The requester (AWS authenticated) of the data pay for the cost of the request and the data download from the bucket, not the owner. </li> <li><strong>Amazon S3 Transfer Acceleration</strong> enables fast, easy, and secure transfers of files over long distances between your client and an S3 bucket. Transfer Acceleration takes advantage of Amazon CloudFront’s globally distributed edge locations. As the data arrives at an edge location, data is routed to Amazon S3 over an optimized network path.</li> <li><strong>Pre-signed URL</strong>: share object with URL with temporary access. Can be done with the command: <code>aws s3 presign</code>. Up to 168 hours valid.</li> <li><strong>S3 Select and Glacier Select</strong>: to retrieve a smaller set of data from an object using server-side SQL. Can filter by rows and columns. 80% cheaper and 400% faster as it uses less network transfer and less CPU on client side.</li> <li><strong>Event Notifications</strong>: on actions like S3:ObjectCreated, S3:ObjectRemoved, S3:ObjectRestore. Can be combined with name filtering. Events may be sent to SNS, SQS, Lambda function, and EventBridge.</li> <li><strong>Amazon Macie</strong>: is a machine learning security service to discover, classify and protect sensitive data stored in S3. </li> <li><strong>S3 Object lock</strong>: to meet regulatory requirements of write once read many storage. Use <em>Legal Hold</em> to prevent an object or its versions from being overwritten or deleted indefinitely and gives you the ability to remove it manually.</li> <li><strong>S3 Byte-Range Fetches</strong>: parallelize GET by requesting specific byte ranges. Used to speed up download or to download partial data. </li> <li><strong>S3 Batch operations</strong>: perform bulk operations on existing S3 objects with a single request. To get the list of object, use <a href>S3 Inventory</a>. Could not integrate custom code. </li> <li><strong>Server Access Logs</strong>: used for audit purpose to track any request made to S3 in the same region, from any account. Logs are saved in another bucket. </li> <li><strong>S3 Glacier Vault Lock</strong>: Adopt a Write Once Read Many model, by creating a Vault Lock Policy. Data will never be deleted.</li> <li><strong>S3 Access points:</strong> Access points are named network endpoints that are attached to buckets that you can use to perform S3 object operations. An Access Point alias provides the same functionality as an Access Point ARN and can be substituted for use anywhere an S3 bucket name is normally used for data access. </li> </ul> <h3 id=faq>FAQ<a class=headerlink href=#faq title="Permanent link">&para;</a></h3> <details class=-> <summary>The last one MB of each file in a bucket contains summary information that you want to expose in a search what to use?</summary> <p>Byte-Range fetch allows you to read only a portion of data from the object. Since the summary is a small part of each object, it is efficient to directly read the summary rather than downloading an entire object from S3. </p> </details> <details class=-> <summary>Pricing factors</summary> <p>Frequency of access, storage cost, retrieval cost and retrieval time. The S3 Intelligent Tiering automatically changes storage class depending on usage to optimize cost. S3 lifecycle is based on age and can be defined with rules.</p> </details> <details class=-> <summary>Expected performance?</summary> <p>S3 automatically scales to high request rates and latency around 100 to 200ms. 5500 GET/HEAD requests per s per prefix in a bucket. 3500 PUT/COPY/POST/DELETE. When uploading files from internet host, it is recommended to upload to AWS edge location and then use AWS private backbone to move file to S3 bucket in target region. This will limit internet traffic and cost. </p> </details> <details class=-> <summary>How to be informed if an object is restored to S3 from Glacier?</summary> <p>The Amazon S3 notification feature enables you to receive notifications when certain events happen in your bucket. To enable notifications, you must first add a notification configuration that identifies the events you want Amazon S3 to publish and the destinations where you want Amazon S3 to send the notifications.</p> </details> <details class=-> <summary>How to upload local file to s3 bucket using CLI?</summary> <p>We can use python and the boto3 library or <code>aws s3</code> CLI. Be sure to have a IAM user (e.g. s3admin) with <code>AmazonS3FullAccess</code> managed policy. The aws config may have added access Ky and secret, may be in a dedicated profile.</p> <div class=highlight><pre><span></span><code>aws s3 cp <span class=nv>$PWD</span>/companies.csv s3://jb-data-set/ --profile s3admin
</code></pre></div> <p>For boto3 example see code under <a href=https://github.com/jbcodeforce/big-data-tenant-analytics>big-data-tenant-analytics</a> project</p> </details> <details class=-> <summary>How to retrieve in minutes up to 250MB of archive from Glacier?</summary> <p>Expedited retrievals allow you to quickly access () 1 to 5 minutes) your data when occasional urgent requests for a subset of archives are required. It provides up to 150 MB/s of retrieval throughput. If you require access to Expedited retrievals under all circumstances, you must purchase <code>provisioned retrieval capacity</code>.</p> </details> <details class=-> <summary>What is provisioned capacity in Glacier?</summary> <p>Provisioned capacity ensures that your retrieval capacity for expedited retrievals is available when you need it. Each unit of capacity provides that at least three expedited retrievals can be performed every five minutes and provides up to 150 MB/s of retrieval throughput.</p> </details> <h2 id=amazon-appflow><a href=https://docs.aws.amazon.com/appflow/latest/userguide/what-is-appflow.html>Amazon AppFlow</a><a class=headerlink href=#amazon-appflow title="Permanent link">&para;</a></h2> <p>AppFlow offers a fully managed service for easily automating the bidirectional exchange of data to SaaS vendors from AWS services like Amazon S3. This helps avoid resource constraints.</p> <h2 id=elastic-file-system-efs>Elastic File System (EFS)<a class=headerlink href=#elastic-file-system-efs title="Permanent link">&para;</a></h2> <p>Fully managed NFS file system. <a href=https://aws.amazon.com/efs/faq/ >FAQ</a> for multi AZs. (3x gp2 cost), controlled by using security group. This security group needs to add in bound rule of type NFS connected / linked to the SG of the EC2.</p> <ul> <li>Only Linux based AMI. POSIX filesystem. Encryption is supported using KMS.</li> <li>1000 concurrent clients.</li> <li>10GB+/s throughput, bursting or provisioned, grow to petabyte.</li> </ul> <p><img alt src=../images/efs.png></p> <ul> <li>Support different performance mode, like max I/O or general purpose</li> <li>Select regional (standard or default) or one zone availabiltiy and durability. </li> <li>Billed for what you use.</li> <li>Support storage tiers to move files after n days. Used on infrequent access, so lifecycle management move file to EFS-IA.</li> <li>Use amazon EFS util tool in each EC2 instance to mount the EFS to a target mount point.</li> <li>Is defined in a subnet, so the EC2 needs to specify in which subnet it runs.</li> </ul> <h2 id=snowball><a href=https://aws.amazon.com/snowball/ >Snowball</a><a class=headerlink href=#snowball title="Permanent link">&para;</a></h2> <p>Move TB to PB of data in and out AWS using physical device to ship data as doing over network will take a lot of time, and may fail. </p> <ul> <li> <p>The <strong>Snowball Edge</strong> device has 100TB and compute power to do some local processing on data. With Compute Optimized version there are 52 vCPUs, 200GB of RAM, optional GPU, 42TB. And for Storage Optimized version, 40 vCPUs,, 80 GB RAM, and object storage clustering. You can use Snowball Edge Storage Optimized if you have a large backlog of data to transfer or if you frequently collect data that needs to be transferred to AWS and your storage is in an area where high-bandwidth internet connections are not available or cost-prohibitive.</p> </li> <li> <p><strong>Snowcone</strong>: smaller portable, secured, rugged, for harsh environments. Limited to 8TB. We can use AWS DataSync to sned data. 2 CPUs, 4GB of mem. </p> </li> <li><strong>SnowMobile</strong> is a truck with 100 PB capacity. Once on site, it is transferred to S3.</li> </ul> <p>Can be used for Edge Computing when there is no internet access.</p> <ul> <li>All can run EC2 instances and AWS lambda function using AWS IoT Greengrass.</li> <li>for local configuration of the snowball, there is a the AWS OpsHub app.</li> </ul> <h2 id=fsx><a href=https://aws.amazon.com/fsx/ >FSx</a><a class=headerlink href=#fsx title="Permanent link">&para;</a></h2> <p>A managed service for file system technology from 3nd party vendors like Lustre, NetApp ONTAP, Windows File Server, OpenZFS...</p> <ul> <li>For Windows FS, supports SMB protocol and NTFS. Can be mounted to Linux EC2. 10s GB/s IOPS and 100s PB of data. Can be configured on multi AZ.</li> <li>Data is backed-up on S3</li> <li>Lustre is a linux clustered FS and supports High Performance Computing, POSIX... sub ms latency, 100s GB/s IOPS. </li> <li>NetApp ONTAP: supports NFS, SMB, iSCSI protocols. Supports storage auto scaling, and point in time instantaneous cloning.</li> <li>OpenZFS compatibles with NFS, scale to 1 million IOPS with &lt; 0,5ms latency, and point in time instantaneous cloning. </li> </ul> <p>Deployment options:</p> <ul> <li>Scratch FS is used for temporary storage with no replication. Supports High burst</li> <li>Persistent FS: long-term storage, replicaed in same AZ</li> </ul> <h2 id=hybrid-cloud-storage>Hybrid cloud storage<a class=headerlink href=#hybrid-cloud-storage title="Permanent link">&para;</a></h2> <p>AWS <a href=https://aws.amazon.com/storagegateway/ >Storage Gateway</a> exposes an API in front of S3 to provide on-premises applications with access to virtually unlimited cloud storage.</p> <p>Three gateway types:</p> <ul> <li> <p><strong>file</strong>: FSx or S3 . </p> <ul> <li>S3 buckets are accessible using NFS or SMB protocols. Controlled access via IAM roles. File gateway is installed on-premise and communicate with AWS via HTTPS.</li> <li>FSx, storage gateways brings cache of last accessed files.</li> </ul> </li> <li> <p><strong>volume</strong>: this is a block storage using iSCSI protocol. On-premise and visible as a local volume backed by S3. Two volume types:</p> <ul> <li>Cached volumes: Your primary data is stored in Amazon S3 while your frequently acccessed data is retained locally in the cache for low-latency access.</li> <li>Stored volumes: Your entire dataset is stored locally while also being asynchronously backed up to Amazon S3.</li> </ul> </li> <li> <p><strong>tape</strong>: same approach but with virtual tape library. Can go to S3 and Glacier. Works with existing tape software.</p> </li> <li>Hardware appliance to run a Storage gateway in the on-premises data center. </li> </ul> <h2 id=transfer-family><a href=https://docs.aws.amazon.com/transfer/latest/userguide>Transfer Family</a><a class=headerlink href=#transfer-family title="Permanent link">&para;</a></h2> <p>To transfer data with FTP, FTPS, SFTP protocols to AWS Storage services like S3, EFS</p> <h2 id=datasync><a href=https://docs.aws.amazon.com/datasync/latest/userguide/ >DataSync</a><a class=headerlink href=#datasync title="Permanent link">&para;</a></h2> <p>AWS DataSync is an online data transfer service that simplifies, automates, and accelerates copying large amounts of data between on-premises storage systems and AWS Storage services, as well as between AWS Storage services.</p> <p>Move a large amount of data to and from on-premises (using agent) to AWS, or to AWS to AWS different storage services.</p> <p>Can be used for:</p> <ul> <li>Data Migration with automatic encryption and data integrity validation.</li> <li>Archive cold data.</li> <li>Data protection.</li> <li>Data movement for timely in-cloud processing.</li> </ul> <p>Replication tasks can be scheduled.</p> <p>It keeps the metadata and permissions about the file. </p> <p>One agent task can get 10 GB/s</p> <p><img alt src=../diagrams/datasync.drawio.png></p> <p>As an example to support the above architecture, we can configure an AWS DataSync agent on the on-premises server that has access to the NFS file system. Transfer data over the Direct Connect connection to an AWS PrivateLink interface VPC endpoint for Amazon EFS by using a private Virtual InterFace (VIF). Set up a DataSync scheduled task to send the video files to the EFS file system every 24 hours.</p> <p>The DataSync agent is deployed as a virtual machine that should be deployed on-premises in the same LAN as your source storage to minimize the distance traveled.</p> <ul> <li><a href=https://aws.amazon.com/blogs/storage/transferring-files-from-on-premises-to-aws-and-back-without-leaving-your-vpc-using-aws-datasync/ >Transferring files from on-premises to AWS and back without leaving your VPC using AWS DataSync</a>.</li> <li><a href=https://aws.amazon.com/datasync/faqs/ >DatSynch FAQ</a>.</li> <li><a href=https://aws.amazon.com/premiumsupport/knowledge-center/public-private-interface-dx/ >Public and Private interface</a>.</li> </ul> <h2 id=storage-comparison>Storage comparison<a class=headerlink href=#storage-comparison title="Permanent link">&para;</a></h2> <ul> <li>S3: Object Storage.</li> <li>Glacier: Object Archival.</li> <li>EFS: When we need distributed, highly resilient storage, using Network File System for Linux instances, POSIX filesystem. Across multiple AZs.</li> <li>FSx for Windows: Network File System for Windows servers. Central storage for Windows based applications.</li> <li>FSx for Lustre: High Performance Computing (HPC) Linux file system. It can store data directly to S3 too.</li> <li>FSx for NetApp: High OS compatibility.</li> <li>FSx for OpenZFS: for ZFS compatibility.</li> <li>EBS volumes: Network storage for one EC2 instance at a time.</li> <li>Instance Storage: Physical storage for your EC2 instance (high IOPS). But Ephemeral.</li> <li>Storage Gateway: File Gateway, Volume Gateway (cache &amp; stored), Tape Gateway.</li> <li>Snowcone, Snowball / Snowmobile: to move large amount of data to the cloud, physically.</li> <li>Database: for specific workloads, usually with indexing and querying.</li> <li>DataSync: schedule data sync from on-premises to AWS or AWS to AWS services.</li> </ul> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../security/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Security" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Security </div> </div> </a> <a href=../route53/ class="md-footer__link md-footer__link--next" aria-label="Next: Route 53" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Route 53 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.9c69f0bc.min.js></script> </body> </html>