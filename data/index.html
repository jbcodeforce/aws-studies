<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.1"><title>RDS-Aurora-ES - AWS Studies</title><link rel=stylesheet href=../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#data-services class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="AWS Studies" class="md-header__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AWS Studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> RDS-Aurora-ES </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/aws-studies.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="AWS Studies" class="md-nav__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> AWS Studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/aws-studies.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../infra/ class=md-nav__link> EC2-others </a> </li> <li class=md-nav__item> <a href=../infra/networking/ class=md-nav__link> Network </a> </li> <li class=md-nav__item> <a href=../infra/security/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../infra/storage/ class=md-nav__link> S3-Storage </a> </li> <li class=md-nav__item> <a href=../infra/route53/ class=md-nav__link> Route 53 </a> </li> <li class=md-nav__item> <a href=../monitoring/monitoring/ class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=../infra/messaging/ class=md-nav__link> Messaging </a> </li> <li class=md-nav__item> <a href=../kinesis/ class=md-nav__link> Kinesis* </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../sa/well-architectured/ class=md-nav__link> Well Architectured </a> </li> <li class=md-nav__item> <a href=../sa/sol-design/ class=md-nav__link> Solution design </a> </li> <li class=md-nav__item> <a href=../sa/psa-role/ class=md-nav__link> SA </a> </li> <li class=md-nav__item> <a href=../sa/saas/ class=md-nav__link> SaaS </a> </li> <li class=md-nav__item> <a href=../sa/resilience/ class=md-nav__link> Resilience </a> </li> <li class=md-nav__item> <a href=../templ/ class=md-nav__link> Conduct Design session </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../analytics/ class=md-nav__link> Analytics </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Data data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> RDS-Aurora-ES <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> RDS-Aurora-ES </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#relational-database-service-rds class=md-nav__link> Relational Database Service - RDS </a> <nav class=md-nav aria-label="Relational Database Service - RDS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multi-az-db-cluster-read-replicas class=md-nav__link> Multi AZ DB Cluster - Read Replicas </a> </li> <li class=md-nav__item> <a href=#dr-multi-az-db-instance class=md-nav__link> DR - Multi AZ DB instance </a> </li> <li class=md-nav__item> <a href=#outpost-integration class=md-nav__link> Outpost integration </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> Backup </a> </li> <li class=md-nav__item> <a href=#rds-proxy class=md-nav__link> RDS Proxy </a> </li> <li class=md-nav__item> <a href=#code-examples class=md-nav__link> Code Examples </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> Deeper dive </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aurora class=md-nav__link> Aurora </a> <nav class=md-nav aria-label=Aurora> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ha-and-read-scaling class=md-nav__link> HA and Read Scaling </a> </li> <li class=md-nav__item> <a href=#other-capabilities class=md-nav__link> Other capabilities </a> </li> <li class=md-nav__item> <a href=#backup_1 class=md-nav__link> Backup </a> </li> <li class=md-nav__item> <a href=#code-examples_1 class=md-nav__link> Code examples </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#fit-for-purpose class=md-nav__link> Fit for purpose </a> </li> <li class=md-nav__item> <a href=#elasticache class=md-nav__link> ElastiCache </a> <nav class=md-nav aria-label=ElastiCache> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#coding class=md-nav__link> Coding </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#documentdb class=md-nav__link> DocumentDB </a> </li> <li class=md-nav__item> <a href=#neptune-graphdb class=md-nav__link> Neptune - GraphDB </a> </li> <li class=md-nav__item> <a href=#appsync class=md-nav__link> AppSync </a> </li> <li class=md-nav__item> <a href=#amazon-qldb class=md-nav__link> Amazon QLDB </a> </li> <li class=md-nav__item> <a href=#opensearch class=md-nav__link> OpenSearch </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=dynamodb/ class=md-nav__link> DynamoDB </a> </li> <li class=md-nav__item> <a href=data-lake/ class=md-nav__link> Data Lake </a> </li> <li class=md-nav__item> <a href=redshift/ class=md-nav__link> RedShift </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../ai-ml/ class=md-nav__link> AI-ML </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Serverless <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Serverless data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../serverless/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../serverless/lambda/ class=md-nav__link> Lambda </a> </li> <li class=md-nav__item> <a href=../serverless/apigtw/ class=md-nav__link> API Gateway </a> </li> <li class=md-nav__item> <a href=../serverless/eks/ class=md-nav__link> EKS </a> </li> <li class=md-nav__item> <a href=../serverless/eventbridge/ class=md-nav__link> EventBridge </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Playground <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Playground data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Playground </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../playground/gettingstarted/ class=md-nav__link> Getting Started IAM-EC2 </a> </li> <li class=md-nav__item> <a href=../playground/rds/ class=md-nav__link> RDS </a> </li> <li class=md-nav__item> <a href=../playground/rt-data-processing/ class=md-nav__link> Data processing </a> </li> <li class=md-nav__item> <a href=../playground/spark-emr/ class=md-nav__link> Analytics on EMR </a> </li> <li class=md-nav__item> <a href=../playground/ecs/ class=md-nav__link> ECS </a> </li> <li class=md-nav__item> <a href=../playground/s3-org-billing/ class=md-nav__link> S3 storage lens </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/big-data-tenant-analytics/ class=md-nav__link> SaaS demo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9> Coding <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Coding data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../coding/ class=md-nav__link> Practices </a> </li> <li class=md-nav__item> <a href=../coding/cloudFormation/ class=md-nav__link> CloudFormation </a> </li> <li class=md-nav__item> <a href=../coding/cdk/ class=md-nav__link> CDK </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io class=md-nav__link> Return to main </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#relational-database-service-rds class=md-nav__link> Relational Database Service - RDS </a> <nav class=md-nav aria-label="Relational Database Service - RDS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multi-az-db-cluster-read-replicas class=md-nav__link> Multi AZ DB Cluster - Read Replicas </a> </li> <li class=md-nav__item> <a href=#dr-multi-az-db-instance class=md-nav__link> DR - Multi AZ DB instance </a> </li> <li class=md-nav__item> <a href=#outpost-integration class=md-nav__link> Outpost integration </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> Backup </a> </li> <li class=md-nav__item> <a href=#rds-proxy class=md-nav__link> RDS Proxy </a> </li> <li class=md-nav__item> <a href=#code-examples class=md-nav__link> Code Examples </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> Deeper dive </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aurora class=md-nav__link> Aurora </a> <nav class=md-nav aria-label=Aurora> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ha-and-read-scaling class=md-nav__link> HA and Read Scaling </a> </li> <li class=md-nav__item> <a href=#other-capabilities class=md-nav__link> Other capabilities </a> </li> <li class=md-nav__item> <a href=#backup_1 class=md-nav__link> Backup </a> </li> <li class=md-nav__item> <a href=#code-examples_1 class=md-nav__link> Code examples </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#fit-for-purpose class=md-nav__link> Fit for purpose </a> </li> <li class=md-nav__item> <a href=#elasticache class=md-nav__link> ElastiCache </a> <nav class=md-nav aria-label=ElastiCache> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#coding class=md-nav__link> Coding </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#documentdb class=md-nav__link> DocumentDB </a> </li> <li class=md-nav__item> <a href=#neptune-graphdb class=md-nav__link> Neptune - GraphDB </a> </li> <li class=md-nav__item> <a href=#appsync class=md-nav__link> AppSync </a> </li> <li class=md-nav__item> <a href=#amazon-qldb class=md-nav__link> Amazon QLDB </a> </li> <li class=md-nav__item> <a href=#opensearch class=md-nav__link> OpenSearch </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/jbcodeforce/aws-studies.git/edit/master/docs/data/index.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=data-services>Data services<a class=headerlink href=#data-services title="Permanent link">&para;</a></h1> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Updated &#8539;/2023</p> </div> <h2 id=relational-database-service-rds><a href=https://docs.aws.amazon.com/rds/index.html>Relational Database Service - RDS</a><a class=headerlink href=#relational-database-service-rds title="Permanent link">&para;</a></h2> <p>Managed service for SQL based database (MariaDB, MySQL, PostgreSQL, SQL server, Oracle, Amazon Aurora), the only things customers do is to define their schema and optimize their queries, AWS manages scaling, HA, backups, software patching, server maintenance... RDS is used for On Line Transaction Processing (OLTP). As an exception, RDS Custom for Oracle (or MSSQL) allows SRE to access and customize the database server host and operating system.</p> <ul> <li>A DB instance provides a network address called an <em>endpoint</em>.</li> <li>When deployed in own VPC, be sure to have at least two subnets, each in a separate Availability Zone. <a href=https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_VPC.html>See VPC and RDS</a>. Prefer installation in private subnet with no public IP address (avoid it at least). </li> <li>It uses general purpose SSD (gp2, gp3), provisioned IOPS (io1) or magnetic storage (magnetic storages do not have consistent performance). <a href=https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Storage.html>See instance storage</a>. Amazon RDS volumes are built using Amazon EBS volumes.</li> <li>HA supported with Primary, in-synch replication to secondary instance. Read replicas can be used to scale reading operations and they are asynchronously replicated. Resources aren't replicated across AWS Regions unless you do so specifically.</li> </ul> <p><img alt src=diagrams/rds-multi-AZ.drawio.svg width=600></p> <ul> <li> <p>Support multi AZs for Reliability Availability with automatic failover to standby, app uses one unique DNS name. Continuous backup and restore to specific point of time restore. </p> </li> <li> <p>Transaction logs are backed-up every 5 minutes. Support user triggered snapshot.</p> </li> <li> <p>Supports <strong>Storage Auto Scaling</strong> to increase storage dynamically with automatic detections of running out of free storage and scale it. (Free storage &lt; 10%, low storage last at least 5 minutes, 6 hours have passed since last notification)</p> </li> <li> <p>For Oracle and MS SQL it is possible to setup a RDS custom. Where you have access to OS and Database.</p> </li> </ul> <p>From a solution architecture point of view:</p> <ul> <li><strong>Operations</strong>: small downtime when failover happens. For maintenance, scaling with read replicas, updating underlying EC2 instances, or restore EBS, there will be manual interventions.</li> <li><strong>Security</strong>: AWS is responsible for OS security, we are responsible for setting up KMS, security groups, IAM policies, authorizing user accesses to the DB, and enforcing SSL.</li> <li><strong>Reliability</strong>: Multi AZ feature helps to address reliability, with automatic failover to the standby instance in case of failures.</li> <li><strong>Performance</strong>: depends on EC2 instance type, EBS volume type, ability to add Read Replicas. Doesn’t auto-scale, adapt to workload manually. </li> <li><strong>Fit for purpose</strong>: for OLAP prefer Redshift.</li> </ul> <h3 id=multi-az-db-cluster-read-replicas>Multi AZ DB Cluster - Read Replicas<a class=headerlink href=#multi-az-db-cluster-read-replicas title="Permanent link">&para;</a></h3> <p>Read replicas helps to scale the read operations. Can create up to 5 read-replicas within a AZ, across AZ and across regions. Replication is asynch (eventually consistent). Use cases include, reporting, analytics on existing DB, or develop a ML model. The application which needs to access a read-replica DB needs to change the connection parameters.</p> <p>AWS charges for network when for example data goes from one AZ to another. Replicas in the same region in RDS managed services are for free, cross regions has a network cost.</p> <p>Read replica is great for read-heavy workloads and takes the load off the primary database (BI jobs). </p> <h3 id=dr-multi-az-db-instance>DR - Multi AZ DB instance<a class=headerlink href=#dr-multi-az-db-instance title="Permanent link">&para;</a></h3> <p>RDS supports instance standby with synchronous replication from master to standby. The application talks to one DNS name, and there will be automatic failover, if connection to master RDS fails.</p> <p>Read-replica DB can be setup as a multi AZ for DR, but RTO is not 0. Read replicas can be promoted to become a primary database, but this is a manual procedure.</p> <p>It is possible to move from a Single-AZ to a Multi-AZ with zero downtime, by changing the multi-AZ parameter in the RDS. The internal process is creating a snapshot from master, create a DB via restore operation in target AZ and start synchronous replication from master to standby.</p> <p>With Multi-AZ RDS, a failure of one node generally recovers within a minute by switching to the standby instance with the only availability impact being the time it takes for the DNS pointer to update.</p> <p>For a single-AZ RDS instance, the RTO of an outage where the data isn't impacted, just the EC2 instance, the availability impact would be the length of time it takes for the underlying EC2 instance to recover, which could take several minutes plus the time to replay any transaction logs.</p> <h3 id=outpost-integration>Outpost integration<a class=headerlink href=#outpost-integration title="Permanent link">&para;</a></h3> <p>AWS Outposts uses the same hardware as in public AWS Regions to bring AWS services, infrastructure, and operation models on-premises. With RDS on Outposts, you can provision managed DB instances close to the business applications that must run on-premises.</p> <h3 id=security>Security<a class=headerlink href=#security title="Permanent link">&para;</a></h3> <ul> <li>Support at rest Encryption (need to specify it at launch time). Master needs to be encrypted to get encrypted replicas. </li> <li>We can create a snapshot from unencrypted DB and then copy it by enabling the encryption for this snapshot. From there, we can create an Encrypted DB</li> <li>For in-flight encryption use AWS TLS root certificates on the client side.</li> <li>To authenticate, traditional user/pwd can be used but also IAM roles to connect to your DB. Enable IAM Database Authentication.</li> <li>Audit Logs are sent to CloudWatch.</li> </ul> <p>Customer's responsibilities:</p> <ul> <li>Check the ports / IP / security group inbound rules in DB’s SG</li> <li>In-database user creation and permissions or manage through IAM</li> <li>Creating a database with or without public access</li> <li>Ensure parameter groups or DB is configured to only allow SSL connections</li> <li>Specify a time window to do maintenance, for version to version migration for example.</li> </ul> <h3 id=backup>Backup<a class=headerlink href=#backup title="Permanent link">&para;</a></h3> <p>RDS has automatic bakcup executed daily during the maintenance window. But the transaction logs are backed-up every 5 minutes. </p> <ul> <li>It is possible to restore the DB states from oldest backup to 5mn ago. </li> <li>1 to 35 days of retention for automatic backup (0 to disable). If you use manual backup with snapshot, then retention is defined as long as you want. </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The manual snapshot can be used when using the database rarely, and the cost of keeping a snapshot, is far less than letting the DB running. </p> </div> <h3 id=rds-proxy>RDS Proxy<a class=headerlink href=#rds-proxy title="Permanent link">&para;</a></h3> <p>This is a managed service to keep a pool of database connections between the DB and the clients, so it will improve the performance to access to the database servers. The connections are kept alive. The client connects to the proxy as it will do with the database. It is valuable with Lambda to DB connection.</p> <p><img alt src=images/rds-proxy.drawio.svg></p> <p>This is a serverless, autoscaling, HA over multi-AZ.</p> <p>With this failover on EDS or Aurora is reduced by up to 66%.</p> <p>Enforce IAM Authentication for DB and securely store credentials in AWS secrets manager.</p> <p>Not expose to public internet. Only visible in the VPC.</p> <h3 id=code-examples>Code Examples<a class=headerlink href=#code-examples title="Permanent link">&para;</a></h3> <p>See <a href=../playground/rds/ >Playground RDS</a></p> <ul> <li><a href=https://github.com/jbcodeforce/autonomous-car-ride>Autonomous Car Ride</a> uses PostgreSQL in RDS and quarkus app.</li> <li><a href=https://github.com/jbcodeforce/big-data-tenant-analytics>SaaS demo - Tenant manager</a></li> </ul> <h3 id=deeper-dive>Deeper dive<a class=headerlink href=#deeper-dive title="Permanent link">&para;</a></h3> <ul> <li> <p><a href=https://aws.amazon.com/blogs/database/understanding-burst-vs-baseline-performance-with-amazon-rds-and-gp2/ >Burst vs Baseline with RDS and GP2</a>:</p> <ul> <li>Dimensions that matter are the size, latency, throughput, and IOPS of the volume.</li> <li>With gp2, IOPS is a function of the size of the volume: 3x GiB with a min of 100 IOPS and a max of 10k IOPS</li> <li>Starting with I/O credit at 3000 IOPS, it can be consumed at burst and replinished at the rate of 3 IOPS per GiB per s.</li> <li>With disk above 1TB, the baseline performance &gt; burst perf.</li> </ul> </li> </ul> <h2 id=aurora>Aurora<a class=headerlink href=#aurora title="Permanent link">&para;</a></h2> <p>Proprietary SQL database storage engine, works using <strong>PostgreSQL</strong> and <strong>mySQL</strong> drivers. </p> <ul> <li><strong>Operations</strong>: less operation, auto scaling storage: it can grow up by increment of 10GB from 10GB to 128 TB. </li> <li><strong>Security</strong>: AWS responsible for OS security, we are responsible for setting up KMS, security groups, IAM policies, authorizing users in DB, enforcing SSL.</li> <li><strong>Reliability</strong>: Multi AZ, HA with minimum of 3 AZs, with 2 copies of the data in each AZ. 6 copies overall.</li> <li><strong>Performance</strong>: Sub 10ms replica lag, up to 15 replicas (MySQL has only 5 replicas). It costs 20% more than RDS. 5x performance improvement over mySQL on RDS, and 3x for PostgreSQL. The compute resources can scale up to 96 vCPUs and 768 GB of memory.</li> </ul> <h3 id=ha-and-read-scaling>HA and Read Scaling<a class=headerlink href=#ha-and-read-scaling title="Permanent link">&para;</a></h3> <p>Failover in Aurora is instantaneous. It’s HA (High Availability) native. Use 1 master - 5 readers to create 6 copies of the data over 3 AZs. It supports cross-region replications.</p> <ul> <li>It needs 4 copies out of 6 to consider write operation as successful.</li> <li>And 3 copies out of 6 needed for read operations. </li> <li>There is a self-healing capability in case of data corruption with peer-to-peer replication. </li> <li>Storage is done across 100s of volumes. </li> <li>Autoscaling on the read operation from 1 to 15 read-replicas. </li> </ul> <p><img alt=6 src=images/aws-aurora.png></p> <p>It is CQRS at DB level, and read can be global. </p> <p>Each connection is handled by a specific DB instance. When you connect to an Aurora cluster, the host name and port that you specify point to an intermediate handler called an <strong>endpoint</strong>. Aurora uses the endpoint mechanism to abstract these connections. </p> <p>Use <strong>writer endpoint</strong> for write operation and <strong>reader endpoint</strong> to access read-replicas. Aurora automatically performing load-balancing among all the Aurora Replicas. It is also possible to design replicas to run on different EC2 server type, and then <strong>custom</strong> endpoints can be defined to access to those servers. This could be interesting for analytic queries.</p> <p>It also supports one write with multiple readers and parallel query, multiple writes and serverless to automate scaling down to zero (No capacity planning needed and pay per second).</p> <h3 id=other-capabilities>Other capabilities<a class=headerlink href=#other-capabilities title="Permanent link">&para;</a></h3> <p>With Aurora Global Database, one primary region is used for write and then up to 5 read only regions with replica lag up to 1 s. Promoting another region (for disaster recovery) has an RTO of &lt; 1 minute.</p> <ul> <li><strong>Serverless</strong>: Amazon Aurora Serverless is an on-demand, auto-scaling configuration for Amazon Aurora. An Aurora Serverless DB cluster is a DB cluster that automatically starts up, shuts down, and scales up or down its compute capacity based on your application’s needs. Aurora Serverless provides a relatively simple, cost-effective option for infrequent, intermittent, sporadic or unpredictable workloads.</li> <li>Multi-master, to protect on write node failure. Every node supports read and write operations. The client has multiple DB connection definitions for failover.</li> <li><strong>Global Aurora</strong>: across region replicas, or use Global Database with one primary region for R/W and up to 5 secondary regions (Read-only), with a replica lag &lt; 1s and up to 16 read replicas per secondary region. Promoting a region for DR should lead to a RTO &lt; 1 mn. It takes less than a second to do replicas cross region. </li> <li>Aurora has integration with ML services like SageMaker and Comprehend. </li> </ul> <h3 id=backup_1>Backup<a class=headerlink href=#backup_1 title="Permanent link">&para;</a></h3> <p>Could not be disabled, and automatic is up to 35 days retention.</p> <p>It is possible to clone an existing Aurora DB, which is fast and cost-effective. For example to create a 'Staging' DB from production one. </p> <p>We can share snapshot with other AWS accounts.</p> <h3 id=code-examples_1>Code examples<a class=headerlink href=#code-examples_1 title="Permanent link">&para;</a></h3> <ul> <li><a href=https://aws.amazon.com/getting-started/hands-on/building-serverless-applications-with-amazon-aurora-serverless/ >Building serverless applications with Amazon Aurora Serverless</a></li> </ul> <h2 id=fit-for-purpose>Fit for purpose<a class=headerlink href=#fit-for-purpose title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Needs</th> <th>Considerations</th> </tr> </thead> <tbody> <tr> <td>Single digit latency</td> <td>DynamoDB</td> </tr> <tr> <td>SQL based OLTP</td> <td>RDS</td> </tr> <tr> <td>SQL based OLAP</td> <td>RedShift</td> </tr> </tbody> </table> <h2 id=elasticache>ElastiCache<a class=headerlink href=#elasticache title="Permanent link">&para;</a></h2> <p>Get a managed Redis or Memcached cluster. Applications queries ElastiCache, if data is not available, gets it from RDS and store it in ElastiCache. Key-Value store.</p> <p>It can be used for user session store so user interaction can go to different application instances. </p> <p><strong>Redis</strong> is a multi AZ with Auto-Failover, supports read replicas to scale on the read operations and to have high availability. It has data durability using AOF persistence, and has backup and restore features.</p> <p>Redis authentication tokens enable Redis to require a token (password) before allowing clients to execute commands, thereby improving data security. IAM Auth is not supported by ElastiCache.</p> <p><strong>Memcached</strong> is a multi-node for partitioning of data (sharding), and no persistence, no backup and restore, not HA via replication. It is based on a multi-threaded architecture.</p> <p>Some patterns for ElastiCache:</p> <ul> <li><strong>Lazy Loading</strong>: all the read data is cached, data can become stale in cache</li> <li><strong>Write Through</strong>: Adds or update data in the cache when written to a DB (no stale data)</li> <li><strong>Session Store</strong>: store temporary session data in a cache (using Time To Level features)</li> </ul> <p>Sub millisecond performance, in memory read replicas for sharding. </p> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h3> <p>TBD add screen shots with some explanation</p> <p>For the configuration, it can also being deployed on premises via AWS Outposts.</p> <p>It does not support IAM authentication. But we can set a security token at the Redis cluster creation. For Redis you can use Redis auth to force user to enter a password to connect. It supports SSL for in-flight encryption. </p> <h3 id=coding>Coding<a class=headerlink href=#coding title="Permanent link">&para;</a></h3> <p>There is the Redis Sorted Sets to guarantee both uniqueness and element ordering. Each time a new element is added to the cache, it is ranked and added in the correct order.</p> <h2 id=documentdb>DocumentDB<a class=headerlink href=#documentdb title="Permanent link">&para;</a></h2> <p>Amazon DocumentDB is a fast, scalable, highly available, and fully managed document database service that supports MongoDB workloads. As a document database, Amazon DocumentDB makes it easy to store, query, and index JSON data.</p> <h2 id=neptune-graphdb><a href=https://docs.aws.amazon.com/neptune/latest/userguide/intro.html>Neptune - GraphDB</a><a class=headerlink href=#neptune-graphdb title="Permanent link">&para;</a></h2> <p>Fully managed graph database service that makes it easy to build and run applications that work with highly connected datasets. </p> <p>The core of Amazon Neptune is a purpose-built, high-performance graph database engine optimized for storing billions of relationships and querying the graph with milliseconds latency.</p> <p>Neptune powers graph use cases such as recommendation engines, fraud detection, knowledge graphs, drug discovery, and network security.</p> <h2 id=appsync><a href=https://docs.aws.amazon.com/appsync/latest/devguide/what-is-appsync.html>AppSync</a><a class=headerlink href=#appsync title="Permanent link">&para;</a></h2> <p>AWS AppSync provides a robust, scalable GraphQL interface for application developers to combine data from multiple sources, including Amazon DynamoDB, AWS Lambda, and HTTP APIs.</p> <p>AppSync may be combined with DynamoDB to make it easy to build collaborative apps that keep shared data updated in real-time.</p> <h2 id=amazon-qldb>Amazon QLDB<a class=headerlink href=#amazon-qldb title="Permanent link">&para;</a></h2> <h2 id=opensearch><a href=https://docs.aws.amazon.com/opensearch-service/ >OpenSearch</a><a class=headerlink href=#opensearch title="Permanent link">&para;</a></h2> <p>OpenSearch is a managed services to search data with indexing. It is the new name of open source project, ElasticSearch. Can use up to 3 PB of attached storage.</p> <p>Pricing is pay for each hour of use of an EC2 instance and for the cumulative size of any EBS storage volumes attached to your instances. If a domain uses multiple Availability Zones, OpenSearch Service does not bill for traffic between the Availability Zones. </p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../analytics/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Analytics" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Analytics </div> </div> </a> <a href=dynamodb/ class="md-footer__link md-footer__link--next" aria-label="Next: DynamoDB" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> DynamoDB </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.code.annotate", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../assets/javascripts/bundle.9c69f0bc.min.js></script> </body> </html>